#!/bin/bash
{{ if eq .chezmoi.os "linux" }}
set -eufo pipefail

# Enter sudo mode for system changes
sudo su -

# snap/common.tmpl hash: {{ include "./.chezmoitemplates/snap/common.tmpl" | sha256sum }}
# snap/workplace.tmpl hash: {{ include "./.chezmoitemplates/snap/workplace.tmpl" | sha256sum }}

echo -e "\nInstalling Basics SNAP packges"
{{ template "snap/common.tmpl" }}

{{ if (eq .chezmoi.arch "amd64") }}
echo -e "\nInstalling SNAP Packages for workplace system"
{{ template "snap/workplace.tmpl" }}
{{ end }}

# Exiting sudo user
if [ "$USER" = "root" ]; then
  exit
fi

{{ end }}
